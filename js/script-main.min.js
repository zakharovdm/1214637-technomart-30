const popup=document.querySelector(".modal-feedback"),button=document.querySelector(".button-contacts"),close=document.querySelector(".modal-close"),form=popup.querySelector(".form-modal"),name=popup.querySelector("[name=user-name]"),email=popup.querySelector("[name=user-email]"),message=popup.querySelector("[name=user-message]");let isStorageSupport=!0,storageName="",storageEmail="";const mapPopup=document.querySelector(".modal-map"),mapLink=document.querySelector(".map-link"),mapClose=mapPopup.querySelector(".modal-close");let slider=document.querySelector(".slider"),sliderService=document.querySelector(".slider-area-services");try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storageName&&storageEmail?(name.value=storageName,email.value=storageEmail,message.focus()):name.focus()}),close.addEventListener("click",function(){popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){name.value&&email.value&&message.value?isStorageSupport&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&(e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"))}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(){mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("modal-show")&&(e.preventDefault(),mapPopup.classList.remove("modal-show"))});let slideIndex=1;function nextSlide(){showSlides(slideIndex+=1)}function previousSlide(){showSlides(--slideIndex)}function currentSlide(e){showSlides(slideIndex=e)}function showSlides(e){let t=document.getElementsByClassName("slide"),s=document.getElementsByClassName("btn-bottom");e>t.length&&(slideIndex=1),e<1&&(slideIndex=t.length);for(let e=0;e<t.length;e++)t[e].style.display="none";for(let e=0;e<s.length;e++)s[e].className=s[e].className.replace(" btn-current","");t[slideIndex-1].style.display="block",s[slideIndex-1].className+=" btn-current"}function currentSlideService(e){showSlidesService(slideIndex=e)}function showSlidesService(e){let t=document.getElementsByClassName("slide-service"),s=document.getElementsByClassName("button-service");e>t.length&&(slideIndex=1),e<1&&(slideIndex=t.length);for(let e=0;e<t.length;e++)t[e].style.display="none";for(let e=0;e<s.length;e++)s[e].className=s[e].className.replace(" button-service-active","");t[slideIndex-1].style.display="block",s[slideIndex-1].className+=" button-service-active"}showSlides(slideIndex),slider.addEventListener("click",function(e){const t=e.target;e=t.id;t.classList.contains("btn-middle-back")&&previousSlide(),t.classList.contains("btn-middle-forward")&&nextSlide(),t.classList.contains("btn-bottom")&&currentSlide(e)}),sliderService.addEventListener("click",function(e){const t=e.target;e=t.id;t.classList.contains("button-service")&&currentSlideService(e)});
